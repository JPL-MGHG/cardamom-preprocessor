<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.0.3 Chrome/140.0.7339.249 Electron/38.7.0 Safari/537.36" version="29.0.3">
  <diagram name="STAC Catalog Structure" id="stac-catalog">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="STAC Catalog Structure & Organization" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="300" width="700" height="30" as="geometry" />
        </mxCell>

        <!-- Directory Structure -->
        <mxCell id="root-catalog" value="output/&#xa;├── catalog.json (Root Catalog)&#xa;├── cardamom-meteorological-variables/&#xa;│   ├── collection.json&#xa;│   └── items/&#xa;│       ├── t2m_min_2020_01.json&#xa;│       ├── t2m_max_2020_01.json&#xa;│       ├── vpd_2020_01.json&#xa;│       ├── total_prec_2020_01.json&#xa;│       ├── ssrd_2020_01.json&#xy;│       ├── strd_2020_01.json&#xy;│       ├── skt_2020_01.json&#xa;│       ├── snowfall_2020_01.json&#xa;│       └── ... (more months)&#xa;├── cardamom-fire-emissions-variables/&#xa;│   ├── collection.json&#xa;│   └── items/&#xa;│       ├── burned_area_2020.json&#xy;│       ├── fire_c_2020.json&#xa;│       └── ... (more years)&#xa;├── cardamom-observational-variables/&#xa;│   ├── collection.json&#xa;│   └── items/ (observational data)&#xy;└── data/ (NetCDF files)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;fontSize=11;fontFamily=monospace" parent="1" vertex="1">
          <mxGeometry x="40" y="60" width="500" height="480" as="geometry" />
        </mxCell>

        <!-- Collection Organization -->
        <mxCell id="collection-org" value="Collection Organization&#xy;&#xa;Auto-generated by variable type:&#xy;&#xa;cardamom-meteorological-variables&#xy;  Contains: All ERA5 meteorology&#xy;  Subset: 8 variables×multiple months&#xy;&#xa;cardamom-fire-emissions-variables&#xy;  Contains: GFED fire data + NOAA CO2&#xy;  Subset: BURNED_AREA, FIRE_C, CO2&#xy;&#xa;cardamom-observational-variables&#xy;  Contains: User-provided obs data&#xy;  Subset: LAI, GPP, ABGB, EWT, etc" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left" parent="1" vertex="1">
          <mxGeometry x="600" y="60" width="380" height="220" as="geometry" />
        </mxCell>

        <!-- STAC Item Properties -->
        <mxCell id="item-props" value="STAC Item Properties&#xy;&#xa;Standard STAC:&#xy;  id: unique item identifier&#xy;  datetime/start_datetime/end_datetime&#xy;  geometry: spatial extent&#xy;  assets: link to NetCDF file&#xy;&#xa;Custom CARDAMOM Properties:&#xy;  cardamom:variable (e.g., &quot;t2m_min&quot;)&#xy;  cardamom:variable_type (classification)&#xy;  cardamom:time_steps (# of time steps)&#xy;  cardamom:units (variable units)&#xy;&#xa;Example Asset:&#xy;  data: {&#xy;    href: &quot;../data/t2m_min_2020_01.nc&quot;&#xy;    type: &quot;application/netcdf&quot;&#xy;  }" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left" parent="1" vertex="1">
          <mxGeometry x="1040" y="60" width="340" height="320" as="geometry" />
        </mxCell>

        <!-- Discovery Process -->
        <mxCell id="discovery-process" value="STAC Discovery Process&#xy;&#xa;1. Query Catalog Recursively&#xy;   - Start at root catalog.json&#xy;   - Traverse all child catalogs&#xy;   - Collect STAC items&#xy;&#xa;2. Filter by Metadata&#xy;   - Match cardamom:variable property&#xy;   - Filter by temporal range&#xy;   - Select matching items&#xy;&#xa;3. Load Data&#xy;   - Extract asset href from items&#xy;   - Load NetCDF from asset URL&#xy;   - Concatenate along time dimension" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left" parent="1" vertex="1">
          <mxGeometry x="600" y="320" width="780" height="220" as="geometry" />
        </mxCell>

        <!-- Collection Update Strategy -->
        <mxCell id="collection-update" value="Collection Update Strategy&#xy;&#xa;Incremental Merging:&#xy;  • New downloader run adds new items&#xy;  • Collection extent (temporal) automatically updated&#xy;  • Merge policy: 'update', 'skip', or 'error'&#xy;&#xa;Collection Extent:&#xy;  start_datetime: Earliest temporal coverage&#xy;  end_datetime: Latest temporal coverage&#xy;  spatial: Bounding box of all items&#xy;&#xa;Benefits:&#xy;  • No need to rebuild entire catalog&#xy;  • Historical data preserved&#xy;  • Incremental updates efficient" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left" parent="1" vertex="1">
          <mxGeometry x="40" y="580" width="740" height="260" as="geometry" />
